var colors=function(){'use strict';var XYPoint=function(x,y){this.x=x;this.y=y;},Red=new XYPoint(0.675,0.322),Lime=new XYPoint(0.4091,0.518),Blue=new XYPoint(0.167,0.04),hexToRed=function(hex){return parseInt(hex.substring(0,2),16);},hexToGreen=function(hex){return parseInt(hex.substring(2,4),16);},hexToBlue=function(hex){return parseInt(hex.substring(4,6),16);},hexToRGB=function(h){var rgb=[hexToRed(h),hexToGreen(h),hexToBlue(h)];return rgb;},randomFromInterval=function(from,to){return Math.floor(Math.random()*(to-from+1)+from);},randomRGBValue=function(){return randomFromInterval(0,255);},crossProduct=function(p1,p2){return(p1.x*p2.y-p1.y*p2.x);},checkPointInLampsReach=function(p){var v1=new XYPoint(Lime.x-Red.x,Lime.y-Red.y),v2=new XYPoint(Blue.x-Red.x,Blue.y-Red.y),q=new XYPoint(p.x-Red.x,p.y-Red.y),s=crossProduct(q,v2)/crossProduct(v1,v2),t=crossProduct(v1,q)/crossProduct(v1,v2);return(s>=0.0)&&(t>=0.0)&&(s+t<=1.0);},getClosestPointToPoint=function(A,B,P){var AP=new XYPoint(P.x-A.x,P.y-A.y),AB=new XYPoint(B.x-A.x,B.y-A.y),ab2=AB.x*AB.x+AB.y*AB.y,ap_ab=AP.x*AB.x+AP.y*AB.y,t=ap_ab/ab2;if(t<0.0){t=0.0;}else if(t>1.0){t=1.0;}
return new XYPoint(A.x+AB.x*t,A.y+AB.y*t);},getDistanceBetweenTwoPoints=function(one,two){var dx=one.x-two.x,dy=one.y-two.y;return Math.sqrt(dx*dx+dy*dy);},getXYPointFromRGB=function(red,green,blue){var r=(red>0.04045)?Math.pow((red+0.055)/(1.0+0.055),2.4):(red/12.92),g=(green>0.04045)?Math.pow((green+0.055)/(1.0+0.055),2.4):(green/12.92),b=(blue>0.04045)?Math.pow((blue+0.055)/(1.0+0.055),2.4):(blue/12.92),X=r*0.4360747+g*0.3850649+b*0.0930804,Y=r*0.2225045+g*0.7168786+b*0.0406169,Z=r*0.0139322+g*0.0971045+b*0.7141733,cx=X/(X+Y+Z),cy=Y/(X+Y+Z);cx=isNaN(cx)?0.0:cx;cy=isNaN(cy)?0.0:cy;var xyPoint=new XYPoint(cx,cy),inReachOfLamps=checkPointInLampsReach(xyPoint);if(!inReachOfLamps){var pAB=getClosestPointToPoint(Red,Lime,xyPoint),pAC=getClosestPointToPoint(Blue,Red,xyPoint),pBC=getClosestPointToPoint(Lime,Blue,xyPoint),dAB=getDistanceBetweenTwoPoints(xyPoint,pAB),dAC=getDistanceBetweenTwoPoints(xyPoint,pAC),dBC=getDistanceBetweenTwoPoints(xyPoint,pBC),lowest=dAB,closestPoint=pAB;if(dAC<lowest){lowest=dAC;closestPoint=pAC;}
if(dBC<lowest){lowest=dBC;closestPoint=pBC;}
cx=closestPoint.x;cy=closestPoint.y;}
return new XYPoint(cx,cy);};return{hexToCIE1931:function(h){var rgb=hexToRGB(h);return this.rgbToCIE1931(rgb[0],rgb[1],rgb[2]);},rgbToCIE1931:function(red,green,blue){var point=getXYPointFromRGB(red,green,blue);return[point.x,point.y];},getCIEColor:function(hexColor){var hex=hexColor||null,xy=[];if(null!==hex){xy=this.hexToCIE1931(hex);}else{var r=randomRGBValue(),g=randomRGBValue(),b=randomRGBValue();xy=this.rgbToCIE1931(r,g,b);}
return xy;}};};if(typeof(define)!=='undefined'&&typeof(define.amd)!=='undefined'){define(colors);}else{window.colors=colors();}
